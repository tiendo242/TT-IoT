<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SMART POOL</title>
  <link rel="icon" href="./image.ico">

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css"/>

  <!-- Chart.js + time adapter (Luxon) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.5.0/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.umd.min.js"></script>

  <!-- MQTT (Browser) -->
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>

<body>
  <div class="container">

    <!-- TOP BAR -->
    <header class="topbar">
      <div class="brand">
        <img class="brand-logo" src="./Logo.png" alt="HCMUTE"/>
        <div class="brand-text">
          <div class="brand-title">SMART POOL</div>
          <div class="brand-sub">Dashboard gi√°m s√°t h·ªì b∆°i IoT</div>
        </div>
      </div>

      <nav class="nav">
        <a href="#" class="nav-link active" data-page="overview">T·ªïng quan</a>
        <a href="#" class="nav-link" data-page="pool-1">H·ªì b∆°i 1</a>
        <a href="#" class="nav-link" data-page="pool-2">H·ªì b∆°i 2</a>
        <a href="#" class="nav-link" data-page="pool-3">H·ªì b∆°i 3</a>
      </nav>

      <div class="statusbar">
        <div class="status-left">
          <span class="pill" id="mqtt-pill">MQTT: --</span>
          <span class="pill" id="firebase-pill">Firebase: --</span>
          <span class="pill" id="http-pill">HTTP: --</span>
        </div>
        <div class="status-right">
          <span class="pill soft" id="time-pill">--:--:--</span>
        </div>
      </div>
    </header>

    <hr class="divider"/>

    <!-- OVERVIEW PAGE -->
    <section id="overview" class="page active">
      <div class="overview-head">
        <h2>T·ªïng quan h·ªá th·ªëng</h2>
        <div class="overview-sub">Gi√°m s√°t nhanh 3 h·ªì ‚Ä¢ b·∫•m ƒë·ªÉ xem chi ti·∫øt</div>
      </div>

      <div class="overview-grid">
        <!-- Pool 1 -->
        <div class="pool-card" data-pool="1">
          <div class="pool-card-top">
            <div class="pool-title">H·ªì b∆°i 1</div>
            <span class="badge ok" id="ov-badge-1">OK</span>
          </div>

          <div class="pool-kpis">
            <div class="kpi">
              <div class="kpi-label">√Åp su·∫•t</div>
              <div class="kpi-value" id="ov-pressure-1">--</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Nhi·ªát</div>
              <div class="kpi-value" id="ov-temp-1">--</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">pH</div>
              <div class="kpi-value" id="ov-ph-1">--</div>
            </div>
          </div>

          <div class="pool-card-bottom">
            <div class="left-mini">
              <div class="signal-dot offline" id="ov-dot-1"></div>
              <span class="mini-text" id="ov-online-1">--</span>
            </div>
            <button class="btn-primary" data-open-pool="1">Xem chi ti·∫øt</button>
          </div>
        </div>

        <!-- Pool 2 -->
        <div class="pool-card" data-pool="2">
          <div class="pool-card-top">
            <div class="pool-title">H·ªì b∆°i 2</div>
            <span class="badge ok" id="ov-badge-2">OK</span>
          </div>

          <div class="pool-kpis">
            <div class="kpi">
              <div class="kpi-label">√Åp su·∫•t</div>
              <div class="kpi-value" id="ov-pressure-2">--</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Nhi·ªát</div>
              <div class="kpi-value" id="ov-temp-2">--</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">pH</div>
              <div class="kpi-value" id="ov-ph-2">--</div>
            </div>
          </div>

          <div class="pool-card-bottom">
            <div class="left-mini">
              <div class="signal-dot offline" id="ov-dot-2"></div>
              <span class="mini-text" id="ov-online-2">--</span>
            </div>
            <button class="btn-primary" data-open-pool="2">Xem chi ti·∫øt</button>
          </div>
        </div>

        <!-- Pool 3 -->
        <div class="pool-card" data-pool="3">
          <div class="pool-card-top">
            <div class="pool-title">H·ªì b∆°i 3</div>
            <span class="badge ok" id="ov-badge-3">OK</span>
          </div>

          <div class="pool-kpis">
            <div class="kpi">
              <div class="kpi-label">√Åp su·∫•t</div>
              <div class="kpi-value" id="ov-pressure-3">--</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">Nhi·ªát</div>
              <div class="kpi-value" id="ov-temp-3">--</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">pH</div>
              <div class="kpi-value" id="ov-ph-3">--</div>
            </div>
          </div>

          <div class="pool-card-bottom">
            <div class="left-mini">
              <div class="signal-dot offline" id="ov-dot-3"></div>
              <span class="mini-text" id="ov-online-3">--</span>
            </div>
            <button class="btn-primary" data-open-pool="3">Xem chi ti·∫øt</button>
          </div>
        </div>
      </div>
    </section>

    <!-- POOL 1 -->
    <section id="pool-1" class="page">
      <div class="page-head">
        <h2 class="big-title">TR·∫†NG TH√ÅI H·ªí B∆†I 1</h2>

        <div class="chart-tabs">
          <button class="chart-btn active" data-chart="pressure">üíß √Åp su·∫•t n∆∞·ªõc</button>
          <button class="chart-btn" data-chart="temperature">üå°Ô∏è Nhi·ªát ƒë·ªô</button>
          <button class="chart-btn" data-chart="ph">üß™ ƒê·ªô pH</button>
        </div>
      </div>

      <div class="chart-container">
        <canvas id="main-pool-chart-1" height="120"></canvas>
      </div>

      <div class="metrics">
        <div class="metric-card">
          <div class="metric-icon">üíß</div>
          <div class="metric-value" id="pressure-1">-- kPa</div>
          <div class="metric-title">√Åp su·∫•t n∆∞·ªõc</div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üå°Ô∏è</div>
          <div class="metric-value" id="temperature-1">--¬∞C</div>
          <div class="metric-title">Nhi·ªát ƒë·ªô</div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üß™</div>
          <div class="metric-value" id="ph-1">-- pH</div>
          <div class="metric-title">ƒê·ªô pH</div>
        </div>
      </div>

      <div class="controls">
        <h3>ƒêi·ªÅu khi·ªÉn</h3>
        <div class="control-grid">
          <button id="pump-toggle-1" class="control-btn on">S√≥ng ON</button>
          <button id="heater-toggle-1" class="control-btn on">Nhi·ªát ƒë·ªô ON</button>
          <button id="co2-toggle-1" class="control-btn on">S·ª•c CO2 ON</button>
        </div>
      </div>
    </section>

    <!-- POOL 2 -->
    <section id="pool-2" class="page">
      <div class="page-head">
        <h2 class="big-title">TR·∫†NG TH√ÅI H·ªí B∆†I 2</h2>

        <div class="chart-tabs">
          <button class="chart-btn active" data-chart="pressure">üíß √Åp su·∫•t n∆∞·ªõc</button>
          <button class="chart-btn" data-chart="temperature">üå°Ô∏è Nhi·ªát ƒë·ªô</button>
          <button class="chart-btn" data-chart="ph">üß™ ƒê·ªô pH</button>
        </div>
      </div>

      <div class="chart-container">
        <canvas id="main-pool-chart-2" height="120"></canvas>
      </div>

      <div class="metrics">
        <div class="metric-card">
          <div class="metric-icon">üíß</div>
          <div class="metric-value" id="pressure-2">-- kPa</div>
          <div class="metric-title">√Åp su·∫•t n∆∞·ªõc</div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üå°Ô∏è</div>
          <div class="metric-value" id="temperature-2">--¬∞C</div>
          <div class="metric-title">Nhi·ªát ƒë·ªô</div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üß™</div>
          <div class="metric-value" id="ph-2">-- pH</div>
          <div class="metric-title">ƒê·ªô pH</div>
        </div>
      </div>

      <div class="controls">
        <h3>ƒêi·ªÅu khi·ªÉn</h3>
        <div class="control-grid">
          <button id="pump-toggle-2" class="control-btn on">S√≥ng ON</button>
          <button id="heater-toggle-2" class="control-btn on">Nhi·ªát ƒë·ªô ON</button>
          <button id="co2-toggle-2" class="control-btn on">S·ª•c CO2 ON</button>
        </div>
      </div>
    </section>

    <!-- POOL 3 -->
    <section id="pool-3" class="page">
      <div class="page-head">
        <h2 class="big-title">TR·∫†NG TH√ÅI H·ªí B∆†I 3</h2>

        <div class="chart-tabs">
          <button class="chart-btn active" data-chart="pressure">üíß √Åp su·∫•t n∆∞·ªõc</button>
          <button class="chart-btn" data-chart="temperature">üå°Ô∏è Nhi·ªát ƒë·ªô</button>
          <button class="chart-btn" data-chart="ph">üß™ ƒê·ªô pH</button>
        </div>
      </div>

      <div class="chart-container">
        <canvas id="main-pool-chart-3" height="120"></canvas>
      </div>

      <div class="metrics">
        <div class="metric-card">
          <div class="metric-icon">üíß</div>
          <div class="metric-value" id="pressure-3">-- kPa</div>
          <div class="metric-title">√Åp su·∫•t n∆∞·ªõc</div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üå°Ô∏è</div>
          <div class="metric-value" id="temperature-3">--¬∞C</div>
          <div class="metric-title">Nhi·ªát ƒë·ªô</div>
        </div>

        <div class="metric-card">
          <div class="metric-icon">üß™</div>
          <div class="metric-value" id="ph-3">-- pH</div>
          <div class="metric-title">ƒê·ªô pH</div>
        </div>
      </div>

      <div class="controls">
        <h3>ƒêi·ªÅu khi·ªÉn</h3>
        <div class="control-grid">
          <button id="pump-toggle-3" class="control-btn on">S√≥ng ON</button>
          <button id="heater-toggle-3" class="control-btn on">Nhi·ªát ƒë·ªô ON</button>
          <button id="co2-toggle-3" class="control-btn on">S·ª•c CO2 ON</button>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div>GVHD:TS. Tr∆∞∆°ng Quang Ph√∫c<br>TT IoT th·ª© 2 ‚Ä¢ Nh√≥m: Nh·∫≠t - Ti·∫øn - Qu√¢n</div>
    </footer>
  </div>

  <script src="./script.js"></script>
</body>
</html>